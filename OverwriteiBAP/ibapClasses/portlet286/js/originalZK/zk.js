(zk=function(a){return jq(a,zk).zk}).copy=function(c,b){c=c||{};for(var a in b){c[a]=b[a]}return c};(function(){var g=0,e=0,f,b=[];function c(r,s,t){return function(u,w){if(s){u=s.apply(this,arguments)}var z=this[r];this[r]=u;if(t&&(z!==u||(w&&w.force))){t.apply(this,arguments)}return this}}function k(){if(jq.isReady||zk.Page.contained.length){q(true,zk.pi?"z-initing":null)}else{setTimeout(k,10)}}function o(){q()}function q(r,s){if(zk.processing&&!jq("#zk_proc").length&&!jq("#zk_showBusy").length){zUtl.progressbox("zk_proc",window.msgzk?msgzk.PLEASE_WAIT:"Processing...",r,s)}}function j(r){var t=r.className.substring(r.className.lastIndexOf(".")+1);return r.id?t+"@"+r.id:t+"#"+r.uuid}function i(C,A){var r=[];for(var B=0,D=C.length;B<D;B++){if(r.length){r.push(", ")}var u=C[B];if(u&&(jq.isArray(u)||u.zk)){r.push("["+i(u,A)+"]")}else{if(zk.Widget.isInstance(u)){r.push(j(u))}else{if(u&&u.nodeType){var E=zk.Widget.$(u);if(E){r.push(jq.nodeName(u),":",j(E))}else{r.push(jq.nodeName(u),"#",u.id)}}else{if(A&&u&&(typeof u=="object")&&!u.nodeType){var G=["{\n"];for(var F in u){G.push(F,":",u[F],",\n")}if(G[G.length-1]==",\n"){G.pop()}G.push("\n}");r.push(G.join(""))}else{if(typeof u=="function"){var G=""+u,t=G.indexOf("{"),z=t<0?G.indexOf("\n"):-1;r.push(G.substring(0,t>0?t:z>0?z:G.length))}else{r.push(""+u)}}}}}}return r.join("")}function n(){if(f){var r=jq("#zk_log");if(!r.length){jq(document.body).append('<div id="zk_logbox" class="z-log"><button onclick="jq(\'#zk_logbox\').remove()">X</button><br/><textarea id="zk_log" rows="10"></textarea></div>');r=jq("#zk_log")}r=r[0];r.value+=f;r.scrollTop=r.scrollHeight;f=null}}function l(){if(zk.mounting){return zk.afterMount(l)}zk.stamp("ending");zk.stamp()}function p(w,r,s,v){for(var u=w._$subs,t=u?u.length:0;--t>=0;){var z=u[t];if(z[r]===s){z[r]=v;p(z,r,s,v)}}}zk.copy(zk,{procDelay:900,tipDelay:800,resendDelay:-1,clickPointer:[0,0],currentPointer:[0,0],loading:0,busy:0,cut:function(t,r){var s;if(t){s=t[r];delete t[r]}return s},$package:function(r,v,z){for(var w=0,t=window;;){var u=r.indexOf(".",w),B=u>=0?r.substring(w,u):r.substring(w);var s=t[B],A;if(A=!s){s=t[B]={}}if(u<0){if(A&&v!==false){zk.setLoaded(r)}if(z){s.$wv=true}return s}t=s;w=u+1}},$import:function(v,w){for(var u=0,z=window;;){var t=v.indexOf(".",u),r=t>=0?v.substring(u,t):v.substring(u);var s=z[r];if(t<0||!s){if(w){if(s){w(s)}else{zk.load(v.substring(0,v.lastIndexOf(".")),function(){w(zk.$import(v))})}}return s}z=s;u=t+1}},$extends:function(A,t,w){if(!A){throw"unknown superclass"}var s=function(){this.$oid=++g;this.$init.apply(this,arguments);var C=this._$ais;if(C){delete this._$ais;for(var B=C.length;B--;){C[B].call(this)}}};var u=s.prototype,r=A.prototype,z=t["$define"];delete t["$define"];zk.copy(u,r);zk.copy(u,t);for(var v in A){if(v!="prototype"){s[v]=A[v]}}zk.copy(s,w);u.$class=s;u._$super=r;u._$subs=[];r._$subs.push(u);s.$class=zk.Class;s.superclass=A;zk.define(s,z);return s},$default:function(r,t){r=r||{};for(var s in t){if(r[s]===undefined){r[s]=t[s]}}return r},override:function(u,s,t){if(typeof s=="string"){u["$"+s]=u[s];u[s]=t}else{for(var r in t){p(u,r,s[r]=u[r],u[r]=t[r])}}return u},define:function(s,v){for(var r in v){var u="_"+r,t=r.charAt(0).toUpperCase()+r.substring(1),z=s.prototype,A=v[r],w=null;if(jq.isArray(A)){w=A.length?A[0]:null;A=A.length>1?A[1]:null}z["set"+t]=c(u,w,A);z["get"+t]=z["is"+t]=new Function("return this."+u+";")}return s},$void:function(){},parseInt:function(s,r){return s&&!isNaN(s=parseInt(s,r||10))?s:0},parseFloat:function(r){return r&&!isNaN(r=parseFloat(r))?r:0},set:function(v,t,u,s){var r=v["set"+t.charAt(0).toUpperCase()+t.substring(1)];if(!r){v[t]=u}else{if(arguments.length>=4){r.call(v,u,s)}else{r.call(v,u)}}},get:function(t,s){var r=s.charAt(0).toUpperCase()+s.substring(1);m=t["get"+r];if(m){return m.call(t)}m=t["is"+r];if(m){return m.call(t)}return t[s]},startProcessing:function(r){zk.processing=true;setTimeout(jq.isReady?o:k,r>0?r:0)},endProcessing:function(){zk.processing=false;zUtl.destroyProgressbox("zk_proc")},disableESC:function(){++zk._noESC},enableESC:function(){--zk._noESC},_noESC:0,error:function(r){new _zErb(r)},errorDismiss:function(){_zErb.closeAll()},log:function(r){var s=i((r!==zk)?arguments:(function(v){var t=[];for(var u=v.length;--u>0;){t.unshift(v[u])}return t})(arguments),(r===zk));f=(f?f+s:s)+"\n";setTimeout(function(){jq(n)},300)},stamp:function(r,u){if(r){if(!u&&!b.length){setTimeout(l,0)}b.push({n:r,t:zUtl.now()})}else{if(b.length){var t=zk._t0;for(var s;(s=b.shift());){zk.log(s.n+": "+(s.t-zk._t0));zk._t0=s.t}zk.log("total: "+(zk._t0-t))}}},_ajaxURI:function(s,B,t,r){if(!t){return B}var C=t.charAt(0)=="/";if(s&&!C){C=true;t="/"+t}var w=B.lastIndexOf(";"),v=B.lastIndexOf("?");if(w<0&&v<0){return C?B+t:t}if(v>=0&&(w<0||v<w)){w=v}var z=C?B.substring(0,w):"";if(r&&r.ignoreSession){return z+t}var A=B.substring(w),u=t.indexOf("?");return u>=0?v>=0?z+t.substring(0,u)+A+"&"+t.substring(u+1):z+t.substring(0,u)+A+t.substring(u):z+t+A},ajaxURI:function(v,u){var s=zk.Desktop.$(u?u.desktop:null);var w=u&&u.au;s=(s?s:zk)[w?"updateURI":"contextURI"];alert("ctx: "+s+" | au: "+w+" | URI: "+v);var t=new RegExp("&p_p_resource_id=([^&$]+)");if(!t.test(s)){return zk._ajaxURI(w,s,v,u)}alert("wow there is a match, RegExp.$1: "+RegExp.$1);var r=s.replace(/&p_p_resource_id=([^&$]+)/,"&p_p_resource_id="+escape(zk._ajaxURI(w,RegExp.$1,v,u)));alert("FINAL URI: "+r);return r},stateless:function(t,v,r,s){var w=zk.Desktop,u;t=t||("z_auto"+e++);u=w.all[t];if(u&&!u.stateless){throw"Desktop conflict"}if(zk.updateURI==null){zk.updateURI=r}if(zk.contextURI==null){zk.contextURI=v}return u||new w(t,v,r,s,true)}});(function(){zk.agent=navigator.userAgent.toLowerCase();zk.safari=zk.agent.indexOf("safari")>=0;zk.opera=zk.agent.indexOf("opera")>=0;zk.gecko=zk.agent.indexOf("gecko/")>=0&&!zk.safari&&!zk.opera;var r;if(zk.gecko){var s=zk.agent.indexOf("firefox/");s=zk.parseInt(zk.agent.substring(s+8));zk.gecko3=s>=3;zk.gecko2_=!zk.gecko3;r="gecko gecko"+s}else{if(zk.opera){r="opera"}else{var s=zk.agent.indexOf("msie ");zk.ie=s>=0;if(zk.ie){s=zk.parseInt(zk.agent.substring(s+5));zk.ie7=s>=7;zk.ie8c=s>=8;zk.ie8=s>=8&&document.documentMode>=8;zk.ie6_=!zk.ie7;zk.ie7_=zk.ie7&&!zk.ie8;r="ie ie"+s}else{if(zk.safari){r="safari"}}}}if(zk.air=zk.agent.indexOf("adobeair")>=0){r="air"}zk.css3=!(zk.ie||zk.gecko2_||zk.opera);if(r){jq(function(){var u=document.body,t=u.className;if(t){t+=" "}u.className=t+r})}})();function d(s,r){return function(){return r.apply(s,arguments)}}zk.Object=function(){};zk.Object.prototype={$init:zk.$void,afterInit:function(r){(this._$ais=this._$ais||[]).unshift(r)},$class:zk.Object,$instanceof:function(){for(var s=arguments.length,r;s--;){if(r=arguments[s]){var t=this.$class;if(t==zk.Class){return this==zk.Object||this==zk.Class}for(;t;t=t.superclass){if(t==r){return true}}}}return false},$super:function(w,v){var u=[],r=typeof w!="string";for(var t=arguments.length,s=r?1:0;--t>s;){u.unshift(arguments[t])}return r?this.$supers(w,v,u):this.$supers(w,u)},$supers:function(t,v,A){if(typeof t!="string"){if(!(t=t.prototype._$super)||!(t=t[v])){throw v+" not in superclass"}return t.apply(this,A)}var w=this._$supers;if(!w){w=this._$supers={}}var u=w[t],s,z,r;if(u){r=u[t];z=u}else{r=this[t];z=this}while(z=z._$super){if(r!=z[t]){s=z[t];if(s){w[t]=z}break}}if(!s){throw t+" not in superclass"}try{return s.apply(this,v)}finally{w[t]=u}},_$subs:[],proxy:function(s){var t=this._$proxies,r;if(!t){this._$proxies=t={}}else{if(r=t[s]){return r}}return t[s]=d(this,s)}};zk.Class=function(){};zk.Class.superclass=zk.Object;zk.Class.prototype.$class=zk.Class;_zkf={$class:zk.Class,isInstance:function(r){return r&&r.$instanceof&&r.$instanceof(this)},isAssignableFrom:function(r){for(;r;r=r.superclass){if(this==r){return true}}return false},$instanceof:zk.Object.prototype.$instanceof};zk.copy(zk.Class,_zkf);zk.copy(zk.Object,_zkf);var h=[],a=0;_zErb=zk.$extends(zk.Object,{$init:function(t){var v="zk_err"+a++,s="#"+v;x=(a*5)%50,y=(a*5)%50,html='<div class="z-error" style="left:'+(jq.innerX()+x)+"px;top:"+(jq.innerY()+y)+'px;" id="'+v+'"><table cellpadding="2" cellspacing="2" width="100%"><tr><td align="right"><div id="'+v+'-p">';if(!zk.light){html+='<span class="btn" onclick="_zErb._redraw()">redraw</span>&nbsp;'}html+='<span class="btn" onclick="_zErb._close(\''+v+'\')">close</span></div></td></tr><tr valign="top"><td class="z-error-msg">'+zUtl.encodeXML(t,{multiline:true})+"</td></tr></table></div>";jq(document.body).append(html);this.id=v;h.push(this);try{var u;this.dg=new zk.Draggable(null,u=jq(s)[0],{handle:jq(s+"-p")[0],zIndex:u.style.zIndex,starteffect:zk.$void,starteffect:zk.$void,endeffect:zk.$void})}catch(r){}},destroy:function(){h.$remove(this);if(this.dg){this.dg.destroy()}jq("#"+this.id).remove()}},{_redraw:function(){zk.errorDismiss();zAu.send(new zk.Event(null,"redraw"))},_close:function(t){for(var r=h.length;r--;){var s=h[r];if(s.id==t){h.splice(r,1);s.destroy();return}}},closeAll:function(){for(var r=h.length;r--;){h[r].destroy()}h=[]}})})();